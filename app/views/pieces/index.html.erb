<% provide(:title, 'All Pieces') %>
<h1>All Pieces</h1>

<div class="filter-group span10 offset2">
	<%= link_to 'Active', pieces_path(:status => 'active'), :class => 'filter' %>
	<span class="divider-vertical"></span>
	<%= link_to 'Inactive', pieces_path(:status => 'inactive'), :class => 'filter' %>
</div>

<table class="table table-striped">
	<thead>
  	<tr>
  		<th>Name</th>
  		<th>Status</th>
  		<th>&nbsp;</th>
  	</tr>
  </thead>
  <tbody>
  	<% @pieces.each do |piece| %>
			<tr>
				<td><%= link_to piece.name, piece_scenes_path(piece) %></td>
				<td><%= active_bool_to_text(piece.active) %></td>
				<td>
					<% if allow? "pieces", "edit" %>
						<%= link_to 'Edit', edit_piece_path(piece), :class => 'btn btn-mini', :id => "edit_#{piece.id}" %>
					<% end %>
					<% if allow? "pieces", "destroy" %>
						<%= link_to 'Delete', piece, method: :delete, confirm: "Delete?", :class => 'btn btn-mini btn-danger', :id => "delete_#{piece.id}" %>
					<% end %>
				</td>
			</tr>
		<% end %>
	</tbody>
</table>

<% unless @pieces.length > 0 %>
	<div class="alert">No records found</div>
<% end %>

<div class="row">
	<div class="span2">
		<% if allow? "pieces", "new" %>
			<%= link_to 'New', new_piece_path, :class => 'btn btn-mini btn-primary' %>
		<% end %>
	</div>
	<div class="span10">
		<%= will_paginate(class: 'pagination',
					previous_label: "&laquo;",
		    	next_label: "&raquo;"
				)%>
	</div>
</div>