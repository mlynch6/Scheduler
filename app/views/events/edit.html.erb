<% type = @event.type.underscore.humanize.titleize %>
<% provide(:title, "Edit #{type}") %>
<% provide(:header_current, 'Calendar') %>
<% provide(:sidebar_current, "Daily") %>

<div class="page-header">
	<h1><%= yield(:title) %></h1>
</div>

<%= form_for @event, as: :event, builder: BootstrapFormBuilder, :html => { :class => 'form-horizontal' } do |f| %>
	<%= f.error_messages %>
	<%= render 'form', :f => f %>
	
	<%= f.submit_group do %>
		<% if @event.event_series %>
				<button class="btn btn-primary" data-toggle="modal" data-target="#updateModal">Update</button>
				<%= render 'update_series_modal', :f => f, :event => @event %>
			<% else %>
				<%= f.submit_primary 'Update' %>
			<% end %>
		
		<% if allow? @event.type.underscore.pluralize, "destroy" %>
			<% if @event.event_series %>
				<button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal"><%= content_tag(:span, nil, class: "glyphicon glyphicon-trash") %> Delete</button>
				<%= render 'delete_series_modal', :event => @event %>
			<% else %>
				<%= delete_button 'Delete', @event %>
			<% end %>
		<% end %>
	<% end %>
<% end %>